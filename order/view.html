{% extends "base.html" %}
{% block title %}Chi Tiết Hóa Đơn #{{ order.MaHoaDon }}{% endblock %}
{% block content %}
<h2>Chi Tiết Hóa Đơn #{{ order.MaHoaDon }}</h2>
<p><strong>Ngày tạo:</strong> {{ order.NgayTao.strftime('%d-%m-%Y %H:%M:%S') }}</p>
<p><strong>Nhân viên:</strong> {{ order.nguoi_dung.HoTen }}</p>

<table class="table">
  <thead>
    <tr>
      <th>Tên Món Ăn</th>
      <th>Số Lượng</th>
      <th>Đơn Giá</th>
      <th>Thành Tiền</th>
    </tr>
  </thead>
  <tbody>
    {% for item in order.ChiTiet %}
    <tr>
      <td>{{ item.mon_an.TenMonAn }}</td>
      <td>{{ item.SoLuong }}</td>
      <td>{{ "{:,.0f}".format(item.DonGia) }} VNĐ</td>
      <td>{{ "{:,.0f}".format(item.ThanhTien) }} VNĐ</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h4><strong>Tổng cộng: {{ "{:,.0f}".format(order.TongTien) }} VNĐ</strong></h4>

<form method="POST" action="{{ url_for('order.delete_order', order_id=order.MaHoaDon) }}"
      class="mt-3" onsubmit="return confirm('Bạn chắc muốn xóa hóa đơn này?');">
  <a href="{{ url_for('order.edit_order', order_id=order.MaHoaDon) }}" class="btn btn-warning">Sửa hóa đơn</a>
  <button type="submit" class="btn btn-danger">Xóa hóa đơn</button>
  <a href="{{ url_for('order.history') }}" class="btn btn-secondary">Quay lại Lịch sử</a>
</form>
{% endblock %}
